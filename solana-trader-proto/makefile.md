# Makefile

This Makefile targets related to generating protocol buffers (protobufs) and Docker operations. Note, the `.PHONY` lines are used to specify that the targets are not associated with files. In other words, these targets will always run, regardless of the state of the file system.

`proto-build-gw`, `proto-build-swagger`, `proto-build-api-go`, `proto-build-api-jito`: These targets generate protobuf files using the `protoc` command inside a Docker container. The Docker container has access to the current directory (`$(CURDIR)`) and uses specific input/output directories for the `protoc` command. The generated protobuf files are used for different purposes like gRPC gateway, Swagger API documentation, and Go API.

| Target                   | Description                                                                                                                                                                                                                                                             |
| ------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `all`                    | This is the default target. It first cleans up previous build outputs and then generates protobuf files.                                                                                                                                                                |
| `clean`                  | This target removes the directories named `js`, `api`, and `common`.                                                                                                                                                                                                    |
| `proto`                  | This target generates protobuf files using various `proto-build-*` targets.                                                                                                                                                                                             |
| `proto-build-swagger`    | This target generates Swagger API documentation from protobuf definitions. It runs a Docker container with a volume mount to the current directory and uses the `protoc` command to generate the Swagger output.                                                        |
| `proto-build-api-go`     | This target generates Go language bindings for the protobuf definitions. It runs a Docker container with a volume mount to the current directory and uses the `protoc` command to generate the Go output.                                                               |
| `proto-build-api-jito`   | This target generates Go language bindings for several protobuf definitions (`auth.proto`, `block.proto`, `block_engine.proto`, etc.). It runs a Docker container with a volume mount to the current directory and uses the `protoc` command to generate the Go output. |
| `proto-build-api-python` | This target generates Python language bindings for the protobuf definitions. It uses the `protoc` command with the `--python_betterproto_out` option to generate the Python output.                                                                                     |
| `proto-build-common-go`  | This target generates Go language bindings for the `common.proto` protobuf definition. It runs a Docker container with a volume mount to the current directory and uses the `protoc` command to generate the Go output.                                                 |
| `proto-docker`           | This target depends on several other targets (`proto-docker-build-go`, `proto-docker-build-js`, `proto-docker-push-go`, `proto-docker-push-js`) and is used to build and push Docker images.                                                                            |
| `proto-docker-push-go`   | This target pushes a Docker image to a Docker registry. The image name is stored in the `$(PB_GO_IMAGE_NAME)` variable.                                                                                                                                                 |
| `proto-docker-build-go`  | This target builds a Docker image using a Dockerfile located in the `proto` directory. The image is tagged with the name stored in the `$(PB_GO_IMAGE_NAME)` variable and is built for the `linux/amd64` platform.                                                      |

